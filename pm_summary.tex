% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Kids PM Summary},
  pdfauthor={Ethan Walker},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering

\title{Kids PM Summary}
\author{Ethan Walker}
\date{Started 22 Nov 2019, Updated 5 Dec 2019}

\begin{document}
\maketitle

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(tidyverse)}
\KeywordTok{library}\NormalTok{(readr)}
\KeywordTok{library}\NormalTok{(knitr)}
\KeywordTok{library}\NormalTok{(lubridate)}
\NormalTok{jvPalette <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"#330099"}\NormalTok{,}\StringTok{"#CC0066"}\NormalTok{,}\StringTok{"#FF6633"}\NormalTok{, }
                 \StringTok{"#0099CC"}\NormalTok{, }\StringTok{"#FF9900"}\NormalTok{,}\StringTok{"#CC6633"}\NormalTok{,}
                  \StringTok{"#FF3366"}\NormalTok{, }\StringTok{"#33CC99"}\NormalTok{, }\StringTok{"#33999"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Load data}
\NormalTok{kids_pm <-}\StringTok{ }\KeywordTok{read_rds}\NormalTok{(}\StringTok{"Output/kids_pm_new.rds"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{summary-stats}{%
\section{Summary stats}\label{summary-stats}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# summary by area}
\NormalTok{summary_area <-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}
\StringTok{  }\CommentTok{#filter(actual_vs_expected == 1) %>% }
\StringTok{  }\CommentTok{#filter(pm <0) %>% }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(home_winter_id) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{summarize}\NormalTok{(}\StringTok{"n"}\NormalTok{ =}\StringTok{ }\KeywordTok{n}\NormalTok{(),}
            \StringTok{"Mean PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{mean}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{), }
            \StringTok{"SD PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{sd}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Min PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{min}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{), }
            \StringTok{"Median PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{median}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Max PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{max}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Mean Sample Days"}\NormalTok{ =}\StringTok{ }\KeywordTok{mean}\NormalTok{(pm_sample_interval, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Min Sample Days"}\NormalTok{ =}\StringTok{ }\KeywordTok{min}\NormalTok{(pm_sample_interval, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{), }
            \StringTok{"Max Sample Days"}\NormalTok{ =}\StringTok{ }\KeywordTok{max}\NormalTok{(pm_sample_interval, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Mean Sample Obs"}\NormalTok{ =}\StringTok{ }\KeywordTok{mean}\NormalTok{(pm_total_observations, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Min Sample Obs"}\NormalTok{ =}\StringTok{ }\KeywordTok{min}\NormalTok{(pm_total_observations, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{), }
            \StringTok{"Max Sample Obs"}\NormalTok{ =}\StringTok{ }\KeywordTok{max}\NormalTok{(pm_total_observations, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{t}\NormalTok{()}
\NormalTok{summary <-}\StringTok{ }\KeywordTok{as.data.frame}\NormalTok{(summary_area)}
\NormalTok{my_names <-}\StringTok{ }\NormalTok{summary_area[}\DecValTok{1}\NormalTok{, ]}
\KeywordTok{colnames}\NormalTok{(summary) <-}\StringTok{ }\NormalTok{my_names}
\NormalTok{summary_area <-}\StringTok{ }\NormalTok{summary }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{rownames_to_column}\NormalTok{() }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{rename}\NormalTok{(}\DataTypeTok{Statistic =}\NormalTok{ rowname) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(Statistic }\OperatorTok{!=}\StringTok{ "area"}\NormalTok{) }
\CommentTok{#summary_area}

\CommentTok{# summary by home_winter_id}
\NormalTok{summary_id <-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(area, home_winter_id) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{summarise}\NormalTok{(}\StringTok{"n"}\NormalTok{ =}\StringTok{ }\KeywordTok{n}\NormalTok{(),}
            \StringTok{"Mean PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{mean}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{), }
            \StringTok{"SD PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{sd}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Min PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{min}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{), }
            \StringTok{"Median PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{median}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Max PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{max}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Act vs Exp Diff"}\NormalTok{ =}\StringTok{ }\KeywordTok{first}\NormalTok{(}\KeywordTok{as.numeric}\NormalTok{(actual_vs_expected_diff)),}
            \StringTok{"Act vs Exp"}\NormalTok{ =}\StringTok{ }\KeywordTok{first}\NormalTok{(actual_vs_expected),}
            \StringTok{"Comments"}\NormalTok{ =}\StringTok{ }\KeywordTok{first}\NormalTok{(qaqccomments))}
\KeywordTok{write_csv}\NormalTok{(summary_id, }\StringTok{"output/kids_summary_id.csv"}\NormalTok{)}

\CommentTok{# summary by dusttrak id}
\NormalTok{summary_dtid <-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{group_by}\NormalTok{(area, dtid) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{summarise}\NormalTok{(}\StringTok{"n"}\NormalTok{ =}\StringTok{ }\KeywordTok{n}\NormalTok{(),}
            \StringTok{"Mean PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{mean}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{), }
            \StringTok{"SD PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{sd}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Min PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{min}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{), }
            \StringTok{"Median PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{median}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{),}
            \StringTok{"Max PM"}\NormalTok{ =}\StringTok{ }\KeywordTok{max}\NormalTok{(pm, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{))}

\NormalTok{histogram_id <-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(home_winter_id }\OperatorTok{==}\StringTok{ "10"} \OperatorTok{&}\StringTok{ }\NormalTok{area }\OperatorTok{==}\StringTok{ "AK"}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{ggplot}\NormalTok{() }\OperatorTok{+}\StringTok{ }
\StringTok{    }\KeywordTok{geom_histogram}\NormalTok{(}\KeywordTok{aes}\NormalTok{(pm), }\DataTypeTok{bins =} \DecValTok{50}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{theme_classic}\NormalTok{()}
\NormalTok{histogram_id}
\end{Highlighting}
\end{Shaded}

\includegraphics{pm_summary_files/figure-latex/unnamed-chunk-3-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{##### 2 Functions to look at PM data across time #####}

\CommentTok{# Plot PM by datetime to look at trends, gaps, and peaks}
\NormalTok{pm_time_plot_function <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(id, location) \{}
\NormalTok{pm_time_plot <-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(home_winter_id }\OperatorTok{==}\StringTok{ }\NormalTok{id }\OperatorTok{&}\StringTok{ }\NormalTok{area }\OperatorTok{==}\StringTok{ }\NormalTok{location) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\CommentTok{#filter(pm < 30000) %>% }
\StringTok{  }\KeywordTok{arrange}\NormalTok{(pm_datetime) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{pm_sampling_day =} \KeywordTok{as.character}\NormalTok{(pm_sampling_day),}
         \DataTypeTok{day_of_week =} \KeywordTok{factor}\NormalTok{(day_of_week,}
                              \DataTypeTok{levels =} \KeywordTok{c}\NormalTok{(}\StringTok{"Sunday"}\NormalTok{, }\StringTok{"Monday"}\NormalTok{, }\StringTok{"Tuesday"}\NormalTok{, }\StringTok{"Wednesday"}\NormalTok{, }
                                         \StringTok{"Thursday"}\NormalTok{, }\StringTok{"Friday"}\NormalTok{, }\StringTok{"Saturday"}\NormalTok{))) }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{ggplot}\NormalTok{() }\OperatorTok{+}\StringTok{ }
\StringTok{    }\KeywordTok{geom_point}\NormalTok{(}\KeywordTok{aes}\NormalTok{(pm_datetime, pm, }\DataTypeTok{color =}\NormalTok{ day_of_week), }\DataTypeTok{size =} \FloatTok{1.5}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{theme_classic}\NormalTok{() }\OperatorTok{+}
\StringTok{    }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{title =}\NormalTok{ id,}
         \DataTypeTok{y =} \KeywordTok{expression}\NormalTok{(}\KeywordTok{paste}\NormalTok{(}\StringTok{"PM"}\NormalTok{[}\FloatTok{2.5}\NormalTok{], }\StringTok{" ("}\NormalTok{, mu, g}\OperatorTok{/}\NormalTok{m}\OperatorTok{^}\DecValTok{3}\NormalTok{, }\StringTok{")"}\NormalTok{)),}
         \DataTypeTok{x =} \StringTok{"Datetime"}\NormalTok{,}
         \DataTypeTok{color =} \StringTok{"Day of week"}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.title.y =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{12}\NormalTok{,}
                                      \DataTypeTok{margin =} \KeywordTok{margin}\NormalTok{(}\DataTypeTok{t =} \DecValTok{0}\NormalTok{, }\DataTypeTok{r =} \DecValTok{20}\NormalTok{, }\DataTypeTok{b =} \DecValTok{0}\NormalTok{, }\DataTypeTok{l =} \DecValTok{0}\NormalTok{)),}
          \DataTypeTok{axis.title.x =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{12}\NormalTok{),}
          \DataTypeTok{axis.text.x =} \KeywordTok{element_blank}\NormalTok{(),}
          \DataTypeTok{axis.text.y =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{12}\NormalTok{, }\DataTypeTok{color =} \StringTok{"black"}\NormalTok{),}
          \DataTypeTok{axis.line.x =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"black"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{1}\NormalTok{), }
          \DataTypeTok{axis.line.y =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"black"}\NormalTok{, }\DataTypeTok{size =} \DecValTok{1}\NormalTok{), }
          \DataTypeTok{axis.ticks =} \KeywordTok{element_blank}\NormalTok{()) }\OperatorTok{+}
\StringTok{    }\KeywordTok{scale_color_manual}\NormalTok{(}\DataTypeTok{values =}\NormalTok{ jvPalette)}

\NormalTok{gaps <<-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(home_winter_id }\OperatorTok{==}\StringTok{ }\NormalTok{id }\OperatorTok{&}\StringTok{ }\NormalTok{area }\OperatorTok{==}\StringTok{ }\NormalTok{location) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{pm_datetime =} \KeywordTok{ymd_hms}\NormalTok{(pm_datetime),}
         \DataTypeTok{datetime_lead =} \KeywordTok{ymd_hms}\NormalTok{(}\KeywordTok{lead}\NormalTok{(pm_datetime)),}
         \DataTypeTok{datetime_1 =} \KeywordTok{seconds}\NormalTok{(pm_datetime),}
         \DataTypeTok{datetime_2 =} \KeywordTok{seconds}\NormalTok{(datetime_lead),}
         \DataTypeTok{datetime_diff_minutes =} \KeywordTok{as.numeric}\NormalTok{(datetime_}\DecValTok{2} \OperatorTok{-}\StringTok{ }\NormalTok{datetime_}\DecValTok{1}\NormalTok{)}\OperatorTok{/}\DecValTok{60}\NormalTok{,}
         \DataTypeTok{datetime_diff_hours =} \KeywordTok{as.numeric}\NormalTok{(datetime_diff_minutes}\OperatorTok{/}\DecValTok{60}\NormalTok{)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{arrange}\NormalTok{(}\KeywordTok{desc}\NormalTok{(datetime_diff_minutes)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(day_of_week, pm_sampling_day, datetime_diff_minutes, datetime_diff_hours, }
\NormalTok{         pm_datetime, datetime_lead)}

\NormalTok{pm_desc <<-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(home_winter_id }\OperatorTok{==}\StringTok{ }\NormalTok{id }\OperatorTok{&}\StringTok{ }\NormalTok{area }\OperatorTok{==}\StringTok{ }\NormalTok{location) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{arrange}\NormalTok{(}\KeywordTok{desc}\NormalTok{(pm)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{select}\NormalTok{(pm_datetime, pm, pm_sampling_day)}

\NormalTok{pm_time_plot}
\NormalTok{\}}

\CommentTok{# Change function input to look at specific home}
\CommentTok{# Run all of these lines together}
\KeywordTok{pm_time_plot_function}\NormalTok{(}\DataTypeTok{id =} \StringTok{"228"}\NormalTok{, }\DataTypeTok{location =} \StringTok{"NN"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Note: method with signature 'Period#ANY' chosen for function '-',
##  target signature 'Period#Period'.
##  "ANY#Period" would also be valid
\end{verbatim}

\includegraphics{pm_summary_files/figure-latex/unnamed-chunk-3-2.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(gaps, }\DecValTok{25}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 25 x 6
##    day_of_week pm_sampling_day datetime_diff_m~ datetime_diff_h~
##    <chr>                 <dbl>            <dbl>            <dbl>
##  1 Wednesday                 1                1           0.0167
##  2 Wednesday                 1                1           0.0167
##  3 Wednesday                 1                1           0.0167
##  4 Wednesday                 1                1           0.0167
##  5 Wednesday                 1                1           0.0167
##  6 Wednesday                 1                1           0.0167
##  7 Wednesday                 1                1           0.0167
##  8 Wednesday                 1                1           0.0167
##  9 Wednesday                 1                1           0.0167
## 10 Wednesday                 1                1           0.0167
## # ... with 15 more rows, and 2 more variables: pm_datetime <dttm>,
## #   datetime_lead <dttm>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(pm_desc, }\DecValTok{25}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 25 x 3
##    pm_datetime            pm pm_sampling_day
##    <chr>               <dbl>           <dbl>
##  1 2019-03-07 19:38:49 5485.               2
##  2 2019-03-07 00:32:49 3394.               1
##  3 2019-03-06 21:12:49 2582.               1
##  4 2019-03-07 21:02:49 2515.               2
##  5 2019-03-07 09:54:49 2061.               1
##  6 2019-03-09 21:05:49 1982.               4
##  7 2019-03-09 13:08:49 1952.               3
##  8 2019-03-07 11:01:49 1939.               1
##  9 2019-03-08 18:51:49 1903.               3
## 10 2019-03-07 19:39:49 1879.               2
## # ... with 15 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{tail}\NormalTok{(pm_desc, }\DecValTok{25}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 25 x 3
##    pm_datetime            pm pm_sampling_day
##    <chr>               <dbl>           <dbl>
##  1 2019-03-08 09:14:49  2.42               2
##  2 2019-03-08 09:15:49  2.42               2
##  3 2019-03-08 09:16:49  2.42               2
##  4 2019-03-08 09:17:49  2.42               2
##  5 2019-03-08 09:18:49  2.42               2
##  6 2019-03-08 09:19:49  2.42               2
##  7 2019-03-08 09:20:49  2.42               2
##  8 2019-03-08 09:21:49  2.42               2
##  9 2019-03-08 09:22:49  2.42               2
## 10 2019-03-08 09:23:49  2.42               2
## # ... with 15 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# filter data for a single home}
\NormalTok{check <-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(area }\OperatorTok{==}\StringTok{ "NN"} \OperatorTok{&}\StringTok{ }\NormalTok{home_winter_id }\OperatorTok{==}\StringTok{ "224"}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(pm }\OperatorTok{<}\StringTok{ }\DecValTok{0}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{boxplots}{%
\section{Boxplots}\label{boxplots}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{boxplots_kids_pm <-}\StringTok{ }\NormalTok{kids_pm }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{filter}\NormalTok{(pm }\OperatorTok{<}\StringTok{ }\DecValTok{500}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{ggplot}\NormalTok{(}\KeywordTok{aes}\NormalTok{(area, pm)) }\OperatorTok{+}
\StringTok{    }\KeywordTok{geom_boxplot}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{size =} \DecValTok{1}\NormalTok{), }\DataTypeTok{lwd =} \FloatTok{1.2}\NormalTok{, }\DataTypeTok{colour =} \StringTok{"black"}\NormalTok{, }
               \DataTypeTok{fatten =} \DecValTok{1}\NormalTok{, }\DataTypeTok{outlier.size =} \FloatTok{1.5}\NormalTok{, }\DataTypeTok{width =} \FloatTok{0.35}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{stat_summary}\NormalTok{(}\DataTypeTok{fun.y=}\NormalTok{mean, }\DataTypeTok{geom=}\StringTok{"point"}\NormalTok{, }\DataTypeTok{shape=}\DecValTok{17}\NormalTok{, }\DataTypeTok{size=}\DecValTok{3}\NormalTok{, }\DataTypeTok{color=}\StringTok{"red"}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{theme_minimal}\NormalTok{() }\OperatorTok{+}
\StringTok{    }\KeywordTok{ylim}\NormalTok{(}\OperatorTok{-}\DecValTok{100}\NormalTok{, }\DecValTok{500}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\CommentTok{#geom_hline(yintercept = 50, color = "red", size = 1.2) +}
\StringTok{    }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{y =} \KeywordTok{expression}\NormalTok{(}\KeywordTok{paste}\NormalTok{(}\StringTok{"PM"}\NormalTok{[}\FloatTok{2.5}\NormalTok{], }\StringTok{" ("}\NormalTok{, mu, g}\OperatorTok{/}\NormalTok{m}\OperatorTok{^}\DecValTok{3}\NormalTok{, }\StringTok{")"}\NormalTok{))) }\OperatorTok{+}
\StringTok{    }\CommentTok{#labs(aes(x = "", y = paste("48-hour indoor PM "[2.5], " (", mu, g/m^3, ")"))) +}
\StringTok{    }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.text.x =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{16}\NormalTok{, }\DataTypeTok{colour =} \StringTok{"black"}\NormalTok{),}
          \DataTypeTok{axis.text.y =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{16}\NormalTok{, }\DataTypeTok{colour =} \StringTok{"black"}\NormalTok{),}
          \DataTypeTok{axis.title.y =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{size =} \DecValTok{16}\NormalTok{,}
                                      \DataTypeTok{margin =} \KeywordTok{margin}\NormalTok{(}\DataTypeTok{t =} \DecValTok{0}\NormalTok{, }\DataTypeTok{r =} \DecValTok{20}\NormalTok{, }\DataTypeTok{b =} \DecValTok{0}\NormalTok{, }\DataTypeTok{l =} \DecValTok{0}\NormalTok{)),}
          \DataTypeTok{axis.title.x =} \KeywordTok{element_blank}\NormalTok{(),}
          \DataTypeTok{axis.line.x =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"black"}\NormalTok{, }\DataTypeTok{size =} \FloatTok{1.2}\NormalTok{), }
          \DataTypeTok{axis.line.y =} \KeywordTok{element_line}\NormalTok{(}\DataTypeTok{colour =} \StringTok{"black"}\NormalTok{, }\DataTypeTok{size =} \FloatTok{1.2}\NormalTok{), }
          \DataTypeTok{axis.ticks =} \KeywordTok{element_blank}\NormalTok{())}
\NormalTok{boxplots_kids_pm}
\end{Highlighting}
\end{Shaded}

\includegraphics{pm_summary_files/figure-latex/unnamed-chunk-4-1.pdf}

\end{document}
