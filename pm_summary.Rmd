---
title: "Kids PM Summary"
author: "Ethan Walker"
date: "Started 22 Nov 2019, Updated 5 Dec 2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, message=FALSE}
library(tidyverse)
library(readr)
library(knitr)
```

```{r}
# Load data
kids_pm <- read_rds("Output/kids_pm_new.rds")
```

# Summary stats
```{r}
summary <- kids_pm %>% 
  filter(pm < 0)

summary_kids_pm <- kids_pm %>%
  #filter(pm < 0)
  summarize(mean(pm_24hr_mean_interval, na.rm = TRUE), 
            sd(pm_24hr_mean_interval, na.rm = TRUE),
            min(pm_24hr_mean_interval, na.rm = TRUE), 
            max(pm_24hr_mean_interval, na.rm = TRUE),
            mean(pm_24hr_mean_obs, na.rm = TRUE), 
            sd(pm_24hr_mean_obs, na.rm = TRUE),
            min(pm_24hr_mean_obs, na.rm = TRUE), 
            max(pm_24hr_mean_obs, na.rm = TRUE),
            min(pm, na.rm = TRUE), 
            max(pm, na.rm = TRUE), 
            mean(pm_sample_interval, na.rm = TRUE),
            min(pm_sample_interval, na.rm = TRUE), 
            max(pm_sample_interval, na.rm = TRUE),
            min(pm_total_observations, na.rm = TRUE), 
            max(pm_total_observations, na.rm = TRUE),
            mean(pm_24hr_daily, na.rm = TRUE), 
            mean(pm_24hr_daily_weighted, na.rm = TRUE)) %>% 
  t()
kable(summary_kids_pm, digits = 2)
```

# Boxplots
```{r, fig.height=6, fig.width=5}
boxplots_kids_pm <- kids_pm %>% 
  ggplot(aes(area, pm_24hr_mean)) +
    geom_boxplot(aes(size = 1), lwd = 1.2, colour = "black", 
               fatten = 1, outlier.size = 1.5, width = 0.35) +
    stat_summary(fun.y=mean, geom="point", shape=17, size=3, color="red") +
    theme_minimal() +
    ylim(0, 400) +
    #geom_hline(yintercept = 50, color = "red", size = 1.2) +
    labs(y = expression(paste("PM"[2.5], " (", mu, g/m^3, ")"))) +
    #labs(aes(x = "", y = paste("48-hour indoor PM "[2.5], " (", mu, g/m^3, ")"))) +
    theme(axis.text.x = element_text(size = 16, colour = "black"),
          axis.text.y = element_text(size = 16, colour = "black"),
          axis.title.y = element_text(size = 16,
                                      margin = margin(t = 0, r = 20, b = 0, l = 0)),
          axis.title.x = element_blank(),
          axis.line.x = element_line(colour = "black", size = 1.2), 
          axis.line.y = element_line(colour = "black", size = 1.2), 
          axis.ticks = element_blank())
boxplots_kids_pm
```

